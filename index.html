
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>OSPI — Purchase Intent Predictor (Kaggle)</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<style>
  :root{
    --bg:#0b0e13;        /* page background */
    --surface:#121826;   /* cards */
    --surface-2:#0f1522; /* inner panels */
    --border:#1f2a3a;    /* borders */
    --text:#e9eef5;      /* primary text */
    --muted:#aab3c2;     /* secondary text */
    --primary:#2e6cff;   /* primary button */
    --primary-600:#255ae0;
    --ring:#3b82f6;      /* focus ring */
  }

  * { box-sizing: border-box; }
  html,body{ height:100%; }
  body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin:0; background:var(--bg); color:var(--text); }
  .wrap { max-width: 1080px; margin: 0 auto; padding:24px; }

  h1 { font-size: 1.7rem; margin: 0 0 8px; letter-spacing:.2px; }
  p.sub { color:var(--muted); margin:0 0 16px; }

  .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap:18px; }
  .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }

  .card {
    background:var(--surface);
    border:1px solid var(--border);
    border-radius:16px;
    padding:16px;
    box-shadow: 0 2px 12px rgba(0,0,0,.25);
  }

  label { display:block; font-size:.9rem; margin-bottom:6px; color:#cdd7e5; }
  input[type=number],select {
    width:100%;
    padding:10px 12px;
    border-radius:10px;
    border:1px solid #2a3445;
    background:#0f1522;
    color:var(--text);
    outline: none;
    transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
  }
  input[type=number]:focus, select:focus {
    border-color: var(--ring);
    box-shadow: 0 0 0 3px rgba(59,130,246,.25);
    background:#111a2a;
  }

  .actions { display:flex; gap:12px; margin-top:10px; align-items:center; }

  .btn { appearance:none; border:none; border-radius:12px; padding:10px 16px; cursor:pointer; font-weight:600; }
  .btn:disabled { opacity:.55; cursor:not-allowed; }
  .btn-primary { background:var(--primary); color:#fff; }
  .btn-primary:hover { background:var(--primary-600); }
  .btn-secondary { background:#404a5f; color:#e9eef5; }
  .btn-secondary:hover { background:#364153; }

  .muted { color:var(--muted); font-size:.9rem; }

  .result { padding:16px; border-radius:14px; background:var(--surface-2); border:1px solid #2a3445; }
  .prob { font-size:1.35rem; }
  #err { color:#ff9c9c; margin-top:10px; white-space:pre-wrap; }

  /* Compact spacing on tiny screens */
  @media (max-width: 520px){
    .wrap { padding:16px; }
    .row { gap:8px; }
    .btn { padding:9px 14px; }
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>Online Shoppers Purchasing Intention — Live Demo</h1>
  <p class="sub">Runs a PyTorch MLP (ONNX) with onnxruntime-web (UMD). Kaggle-safe (no fetch for model/JSON).</p>

  <!-- Presets -->
  <div class="card" style="margin-bottom:16px;">
    <div class="row">
      <label for="exampleSelect" class="muted">Try a preset:</label>
      <select id="exampleSelect" style="min-width:280px;">
        <option value="purchase_hi">High-intent Purchase (Returning, Nov, high value)</option>
        <option value="no_purchase_bounce">No-purchase Bounce (New visitor, high exit)</option>
        <option value="research_maybe">Researching / Maybe (info heavy, moderate)</option>
      </select>
      <button id="loadBtn" class="btn btn-secondary">Load</button>
      <button id="loadPredictBtn" class="btn btn-primary">Load & Predict</button>
      <button id="resetBtn" class="btn btn-secondary">Reset to defaults</button>
      <span class="muted">Threshold:
        <input id="thrInput" type="number" step="0.01" min="0" max="1" style="width:76px;margin-left:6px;">
      </span>
    </div>
  </div>

  <div class="grid" id="inputs"></div>

  <div class="card">
    <div class="actions">
      <button id="predictBtn" class="btn btn-primary">Predict</button>
    </div>
    <div class="result" style="margin-top:14px;">
      <div class="prob">Probability of Purchase: <b id="prob">–</b></div>
      <div>Predicted Class: <b id="cls">–</b></div>
      <div id="err"></div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.19.2/dist/ort.min.js"></script>
<script src="./app.js?v=3"></script>
</body>
</html>
